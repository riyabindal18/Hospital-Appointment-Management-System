<%- include('../partials/header') %>

<section class="list-section">
  <div class="list-container">
    <h2>Our Doctors</h2>

    <div class="doctor-list">
      <% doctors.forEach((doctor, index) => { %>
        <div class="doctor-card" style="display: flex; align-items: flex-start; gap: 15px;">
          <div class="doctor-info" style="flex: 1;">
            <h3><%= doctor.name %></h3>
            <p><strong>Specialization:</strong> <%= doctor.specialization %></p>
            <p><strong>Experience:</strong> <%= doctor.experience %> years</p>
            <p><strong>Contact:</strong> <%= doctor.contact %></p>
            <p><strong>Availability:</strong></p>
            <% if (doctor.availability && doctor.availability.length > 0) { %>
              <ul style="list-style: none; padding: 0; margin: 5px 0;">
                <% doctor.availability.forEach(slot => { %>
                  <li style="background: #e0f2f1; margin: 2px 0; padding: 4px 8px; border-radius: 4px; border-left: 3px solid #00796b;">
                    <%= slot.day %>: <%= slot.startTime %> - <%= slot.endTime %>
                  </li>
                <% }) %>
              </ul>
            <% } else { %>
              <p style="color: #777; font-style: italic; margin: 5px 0;">No availability set</p>
            <% } %>

            <% if (user && user.role === 'patient') { %>
              <a href="/appointments/book?doctorId=<%= doctor._id %>" class="btn-book-appointment">
                Book Appointment
              </a>
            <% } %>
          </div>
          <div class="doctor-image">
            <img src="<%= doctor.photo || 'https://via.placeholder.com/120x120/00796b/ffffff?text=ðŸ‘¨â€âš•ï¸' %>"
                 alt="<%= doctor.name %>"
                 onerror="this.src='https://via.placeholder.com/120x120/00796b/ffffff?text=ðŸ‘¨â€âš•ï¸'"
                 style="width: 120px; height: 120px; border-radius: 10px; object-fit: cover; border: 3px solid #e0f2f1;">
          </div>
        </div>
      <% }) %>
    </div>

    <div class="doctor-actions">
      <% if (user && (user.role === 'admin' || user.role === 'doctor')) { %>
        <a href="/doctors/add" class="add-doctor-link">Add New Doctor</a>
      <% } %>
    </div>
  </div>
</section>

<%- include('../partials/footer') %>
